package ex02;

import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.SwingConstants;

public class Main {

	public static void main(String[] args) {
		
		JFrame formulario = new JFrame();
		formulario.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		formulario.setSize(165, 95);
		formulario.setLocationRelativeTo(null);
		formulario.setTitle("Exercicio 02");
		formulario.setResizable(false);
		formulario.setLayout(null);
		
		JLabel lbl_preco = new JLabel("Preço Original");
		JTextField tf_preco = new JTextField();
		JLabel lbl_precoDesconto = new JLabel("R$ 00,00");
		
		lbl_preco.setBounds(5, 0, 150, 20);
		lbl_preco.setHorizontalAlignment(SwingConstants.CENTER);
		tf_preco.setBounds(5, 20, 150, 25);
		tf_preco.setHorizontalAlignment(SwingConstants.CENTER);
		lbl_precoDesconto.setBounds(5, 45, 150, 20);
		lbl_precoDesconto.setHorizontalAlignment(SwingConstants.CENTER);
		
		tf_preco.addKeyListener(new KeyListener() {
			
			@Override
			public void keyTyped(KeyEvent e) {
				
			}
			
			@Override
			public void keyReleased(KeyEvent e) {
				if(e.getKeyCode() == KeyEvent.VK_ENTER) {
					System.out.println("Enter");
				} else {
					System.out.println();
					StringBuilder conteudo = new StringBuilder(tf_preco.getText());
					boolean virgula = false;
					for (int i = 0; i < conteudo.length(); i++) {
						if(((!Character.isDigit(conteudo.charAt(0)) || (conteudo.charAt(i) != ',' && (!virgula))))) {
							conteudo.setCharAt(i, (char) 0);
							continue;
						}
						if(conteudo.charAt(i) == ',') {
							virgula = true;
						}
					}
					tf_preco.setText(conteudo.toString());
				}
			}
			
			@Override
			public void keyPressed(KeyEvent e) {
				
			}
		});
		
		formulario.add(lbl_preco);
		formulario.add(tf_preco);
		formulario.add(lbl_precoDesconto);
		formulario.setVisible(true);

	}

}
